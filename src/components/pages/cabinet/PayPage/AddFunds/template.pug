// Add Funds

div(:class="`${pre}`").main-content.main-content--h-padding
  div.main-content--top-padding(:class="`${pre}__back-main`")
  div(:class="`${pre}__container-main`").main-content--top-menu-fix
    div.caption(:class="`${pre}__back-main`")
      div.ml-auto
        er-icon(name="arrow_l" :class="`${pre}__icon-height`")
        a.caption2(
          href="#"
          :class="`${pre}__back-main__text`"
          @click="paypage"
        )
          | Назад в платежи и начисления

    div.mb-8.d--flex.align-items-start(:class="`${pre}__back-arr`")
      div(:class="`${pre}__back-main-xs`" @click="paypage")
        er-icon(name="left")
      h1.fonts--demi(:class="`${pre}__welcome-title`")
        | Пополнить счет

    div(:class="`${pre}__main`")
      div(:class="`${pre}__line`")
      div(:class="`${pre}__sum`")
        div.d--flex(:class="`${pre}__sum__left ${direct}`")
          er-flex.mb-16.pr-8(
            xs12
            md7
            lg4 xl5
            order-xs2
            order-lg1
            :class="`${pre}__sum__pos`"
          )
            h4(:class="`${pre}__sum__title`")
              | Сумма оплаты
            div(:class="`${pre}__sum__input ${pre}__sum__input${borderSum}`")
              er-text-field(
                v-model="sumPay"
                mask="moneynorub"
              )
                template(slot="append-inner")
                  div.rub
            div(:class="`${pre}__sum__empty`" v-if="isEmptySum")
              | Поле не заполнено

            div(:class="`${pre}__sum__on-autopay`")
              div(
                :class="`${pre}__sum__on-autopay__over`"
                v-if="!(numCard !== 0 && (numCard === visAutoPay || visAutoPay === 0))"
              )
              div(
                @click="autoPay"
                :class="`${pre}__sum__autopay__over`"
              )
              span
                er-toggle(
                  v-model="isAutoPay"
                )
              span.mb-4(
                :class="`${pre}__sum__autopay`"
                @click="payAutoTextConfirm"
              )
                | {{ checkAutoPay }}
              span()
                er-hint(:class="`${pre}__sum__hint`").ml-8
                  h3.mb-8 Автоплатёж
                  | — это бесплатный сервис.<br /><br />
                  | {{ textAutopay }}
                div(@click="payAutoConfirm")
                  er-icon(
                    name="question"
                    :class="`${pre}__sum__confirm`"
                  )

            div(:class="`${pre}__sum__button`")
              er-button(
                width="100%",
                @click="paymentConfirm"
              ) Пополнить счёт
            div(:class="`${pre}__sum__text`")
              | Нажимая на кнопку, Вы принимаете&ensp;
              a(
                href="https://console.ertelecom.ru/files/upload/d/1/0/d108447fbf9c5d88c2801d14a6e76725.pdf",
                target="_blank"
              ) условия оплаты и безопасности

          er-flex(
            xs12
            md12
            lg8 xl7
            order-xs1
            order-lg2
            :class="`${pre}__sum__move-card`"
          )
            PayCard(
              :empty="empty"
              :visAutoPay="visAutoPay"
              @openDelConfirm="openDelConfirm"
              @openRemcard="openRemcard"
              @clearEmpty="clearEmpty"
            )

    div(:class="`${pre}__check`")#get-check
      div(:class="`${pre}__check__decoration`")
        div(:class="`${pre}__check__decoration-line`")
      div(:class="`${pre}__check__get-check`")
        div(:class="`${pre}__check__header`")
          h3(:class="`${pre}__check__title`")
            | Отправить чек
          span()
            er-hint(:class="`${pre}__sum__hint__check`")
              h3.mb-8
                | Получение чека
              | {{ textCheck }}
            div(@click="checkConfirm")
              er-icon(
                name="question"
                :class="`${pre}__sum__confirm__check`"
              )
        div(:class="`${pre}__check__body ${pre}__check__body${borderCheck}`")
          div.caption(:class="`${pre}__check__input`")
            | на электронную почту:
          div(:class="`${pre}__check__input__over`")
          // todo-er Подправить, когда добавится возможность ввода email
          er-select(
            :placeholder="currentEmail",
            :items="emails",
            v-model="selEmail"
            @input="selectEmail"
            :class="`${pre}__check__input__select`"
          )
        div(:class="`${pre}__check__empty`" v-if="isEmptyEmail")
          | Поле заполнено не верно

    // Чек
    Hint( v-if="openConfirmCheck"
      :vis="openConfirmCheck"
      title="Отправить чек"
      description=""
      :subText="textCheck"
      hasErr=""
      err=""
      buttLeftText=""
      buttRightText="Спасибо"
      @closeConfirm="closeConfirm"
      @buttRight="closeConfirm"
    )

    // Пополнение
    Confirm( v-if="openConfirmPay"
      :vis="openConfirmPay"
      title="Вы уверены, что хотите оплатить"
      :subText ="nameCard"
      hasErr=""
      err=""
      :sumPay="sumPay"
      :buttLeft="paymentsOn"
      buttText="Оплатить"
      @closeConfirm="closeConfirm"
      @buttLeft="paymentsOn"
    )

    // Запомнить карту
    Hint( v-if="openConfirmDataCard"
      :vis="openConfirmDataCard"
      title="Данные карты"
      description=""
      :subText="textRemcard"
      hasErr=""
      err=""
      buttLeftText="Не сохранять"
      buttRightText="Запомнить карту"
      @closeConfirm="closeConfirm"
      @buttLeft="remcardButtLeft"
      @buttRight="remcardButtRight"
    )

    // Автоплатеж
    Confirm( v-if="isAutoPay && openConfirmAutoPay"
      :vis="openConfirmAutoPay"
      title="Вы уверены, что хотите отключить автоплатеж на карте:"
      :subText="nameCard"
      :hasErr="errDelAutoPay"
      err="Произошла ошибка. Автоплатеж не отключен. Попробуйте позже."
      :buttLeft="autopayButtLeft"
      buttText="Отключить"
      @closeConfirm="closeConfirm"
      @buttLeft="autopayButtLeft"
    )
    Confirm( v-if="!isAutoPay && openConfirmAutoPay"
      :vis="openConfirmAutoPay"
      title="Вы уверены, что хотите подключить автоплатеж на карту:"
      :subText="nameCard"
      :hasErr="errDelAutoPay"
      err="Произошла ошибка. Автоплатеж не подключен. Попробуйте позже."
      :buttLeft="autopayButtRight"
      buttText="Подключить"
      @closeConfirm="closeConfirm"
      @buttLeft="autopayButtRight"
    )
    Hint( v-if="isAutoPay && visConfirmAutoPay"
      :vis="visConfirmAutoPay"
      title="Автоплатёж"
      description="— это бесплатный сервис."
      :subText="textAutopay"
      :hasErr="errDelAutoPay"
      err="Произошла ошибка. Автоплатеж не отключен. Попробуйте позже."
      buttLeftText="Отменить"
      buttRightText="Отключить"
      @closeConfirm="closeConfirm"
      @buttLeft="autopayButtRight"
      @buttRight="autopayButtLeft"
    )
    Hint( v-if="!isAutoPay && visConfirmAutoPay"
      :vis="visConfirmAutoPay"
      title="Автоплатёж"
      description="— это бесплатный сервис."
      :subText="textAutopay"
      :hasErr="errDelAutoPay"
      err="Произошла ошибка. Автоплатеж не подключен. Попробуйте позже."
      buttLeftText="Отменить"
      buttRightText="Подключить"
      @closeConfirm="closeConfirm"
      @buttLeft="closeConfirm"
      @buttRight="autopayButtRight"
    )

    // Удалить карту
    Confirm(
      :vis="openConfirmDel"
      title="Вы уверены, что хотите удалить карту ?"
      :subText="nameCard"
      :hasErr="errDelCard"
      err="Произошла ошибка. Карта не удалена. Попробуйте позже."
      :buttLeft="delCard"
      buttText="Удалить"
      @closeConfirm="closeConfirm"
      @buttLeft="delCard"
    )
