%connection-chart-legend-inactive{
  @include color-black(.5);

  @at-root .is-hide-inactive & {
    display: none;
  }
}

.connections-chart {
  width: 100%;

  .chart-holder {
    min-height: 256px;

    &:not(.line){
      margin-top: $padding-x8;
    }
  }

  .line-chart-period {
    margin-top: $padding-x2;
    margin-bottom: $padding-x8;

    &__item{
      @extend %caption1;
      padding: $padding-x2 $padding-x4;
      display: inline-block;
      vertical-align: middle;
      border-radius: 8px;

      &.is-selected{
        background-color: map_get($gray, '3');
      }

      &:not(:last-child) {
        margin-right: $padding-x2;

        @include media-query((
          margin-right: (lg: $padding-x4)
        ));
      }

      &:active, 
      &:focus{
        outline: 0;
        box-shadow: none;
      }
    }
  }

  .chart-legend{
    $root: #{&};
    @extend %body;

    margin-top: $padding-x6;

    @include media-query((
      margin-top: (lg: $padding-x8)
    ));

    &__controls{
      margin-bottom: $padding-x2;
      justify-content: space-between;

      &__item{
        @extend %caption2;
        border-bottom: 1px dashed;
        cursor: pointer;
      }
    }

    &__head{
      border-top: 1px solid map_get($gray, '5');;
    }

    &__section-head{      
      border-top: 1px solid map_get($gray, '5');

      &.is-inactive{
        @extend %connection-chart-legend-inactive;
      }

      @include media-query((
        padding-left: (md: 20px)
      ));
    }

    &__item{
      padding-top: $padding-x2;
      padding-bottom: $padding-x2;
      display: flex;

      &.is-inactive{
        @extend %connection-chart-legend-inactive;
      }

      &__label{
        flex: 1 1 70%;
        display: flex;
        align-items: center;    
      }

      &__data,
      &__data-pcnt{
        @extend %h4;
        flex-shrink: 0;        
        text-align: right;
        @include color-black(.8);
      }

      &__data{
        flex-basis: 85px;
      }

      &__data-pcnt{
        flex-basis: 65px;

        &__pcnt{
          @extend %caption1;
          padding-left: 2px;
        }

        @include media-query((
          flex-basis: (md: 45px)
        ));
      }

      &__marker, &__toggle-marker{
        width: 16px;
        height: 16px;
        display: inline-block;
        vertical-align: middle;
        border-radius: 8px;
        flex-shrink: 0;
      }

      &__toggle-marker{        
        background-color: map_get($gray, '4');

        &.is-open{
          transform: rotate(-180deg);
          transform-origin: 50% 50%;

          .er-icon{
            position: relative;
            @include media-query((
              top: (md: -1px)
            ));
          }
        }

        svg{
          width: 16px !important;
          height: 16px !important;
        }
      }

      &__marker {
        border: 2px solid map_get($gray, '5');
        margin-left: $padding-x1;
      }

      &__txt{
        margin-left: $padding-x2;
        display: inline-block;
        vertical-align: middle;        
      }
    }

    &__content{
      border-bottom: 1px solid map_get($gray, '5');

      &-section{      
        @include media-query((
          padding-left: (md: $padding-x4)
        ));

        .chart-legend__item{
          padding-left: $padding-x4;

          @include media-query((
            padding-left: (md: $padding-x10)
          ));
        }
      }
    }
  }
}