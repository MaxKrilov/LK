.oats-main-page
  .oats-main-page__header
    er-page-header(
      title="Облачная телефония"
      link-text="Назад в кабинет"
      backlink="/lk/"
    )

  template(v-if="isPointsLoaded")
    template(v-if="domainList.length")
      .oats-main-page__content-wide
        point(
          v-for="item in domainList"
          :address="item.address"
          :name="getDomainPointFulladdress(item.locationId)"
          :price="getDomainPrice(item).toString()"
          :serviceCount="getServiceCount(item)"
          :bpi="item.id"
          :cityId="item.cityId"
          :key="item.bpi"
        )
          point-content(
            :value="item",
            :services="getServiceList(item)"
            :packagesMinutes='getPackagesMinutes(item)'
            :phones="getPhoneList(item)"
            :bpi="item.id"
            :cityId="item.cityId"
            @suspend="onSuspendProduct"
          )

        total-block(:loading="!isDomainsLoaded") {{ totalValue|price }}

      .oats-main-page__footer
        er-button(
          color="blue"
          :to="{name: 'go-to-oats-portal'}"
        ) Подключить ОАТС

    template(v-else-if="countOfPoints === 0 ")
      .oats-main-page__content-wide
        OATSPromo
    
    template(v-else)
      .oats-main-page__content-wide
        ErtProgressCircular(indeterminate width="2")
        .title Загружаем облачную телефонию


  template(v-else)
    .oats-main-page__content-wide
      point(
        :loading="true"
      )

      total-block(:loading="!isDomainsLoaded") {{ totalValue|price }}
